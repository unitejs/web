<template>
    <require from="../attributes/prismAttribute"></require>
    <require from="../attributes/scrollToElementAttribute"></require>
    <div class="row m-0">
        <div class="container padding-top padding-bottom">
            <h1>Generated App</h1>

            <p>The following information is included as the README.md within the www folder of each build and gives an idea
                of the facilities available to the generated app.</p>

            <hr>

            <p>The main contents of the application are in the www folder, it is created this way to allow for platform and
                packaged versions folders in the root.</p>

            <p>The following global pre-requisities are needed:</p>

            <pre><code au-prism="nix">npm -g install gulp [or] yarn global add gulp</code></pre>

            <p>Once gulp is installed you can install the npm packages for the app by running the gulp commands from the www
                folder.
            </p>

            <pre><code au-prism="nix">npm install [or] yarn install</code></pre>

            <hr>

            <h2>Gulp Tasks</h2>

            <p>The following gulp commands are available for the app.</p>

            <ul>
                <li>build</li>
                <li>theme-build</li>
                <li>unit [optional]</li>
                <li>e2e-install [optional]</li>
                <li>e2e [optional]</li>
                <li>serve</li>
                <li>version</li>
                <li>platform-electron-dev [optional]</li>
                <li>platform-web-package [optional]</li>
                <li>platform-electron-package [optional]</li>
                <li>platform-docker-package [optional]</li>
            </ul>

            <h3>build</h3>

            <p>This will transpile and build the app ready to run.</p>

            <pre><code au-prism="nix">gulp build</code></pre>

            <p>You can specify a buildConfiguration (see the buildConfiguration command for details on how to add one) with
                the following syntax:</p>

            <pre><code au-prism="nix">gulp build --buildConfiguration=prod</code></pre>

            <p>If you don't want to keep running the build command you can add the watch switch, this will monitor for changes
                in source/views/styling and build whatever is required. This will perform an initial complete build to make
                sure it is error free, but will only run some of the sub tasks for changes. You should run a full build again
                before performing other tasks:</p>

            <pre><code au-prism="nix">gulp build --watch</code></pre>

            <h3>theme-build</h3>

            <p>You will need to run this task at least once to generate the necessary favicon images and meta tags. See
                <a href="#" au-scroll-to-element="id: themeAssets; y-offset.bind: topOffset">Theme Assets</a> for more details.</p>

            <pre><code au-prism="nix">gulp theme-build</code></pre>

            <h3>unit</h3>

            <p>This will run unit tests for the app and generate unit and coverage reports in the test/reports folder. This
                task is only available if you specified a unit test runner, framework and engine during configuration.</p>

            <pre><code au-prism="nix">gulp unit</code></pre>

            <p>You can run just a subset of tests by providing a source name as follows:</p>

            <pre><code au-prism="nix">gulp unit --grep=app</code></pre>

            <p>Or run in a browser (this will only work if the unit test runner is Karma) using:</p>

            <pre><code au-prism="nix">gulp unit --browser=[chrome/firefox/ie/safari]</code></pre>

            <p>If you don't want to keep running the full unit command you can add the watch switch, this will monitor for changes
                in source/views/styling and build whatever is required.</p>

            <pre><code au-prism="nix">gulp unit --watch</code></pre>

            <h3>e2e-install</h3>

            <p>This will install all the necessary components required for the e2e tests, it need only be run once. This task
                is only available if you specified an e2e test runner and framework during configuration.</p>

            <pre><code au-prism="nix">gulp e2e-install</code></pre>

            <h3>e2e</h3>

            <p>This will run e2e tests for the app and generate reports in the test/reports folder. This task is only available
                if you specified an e2e test runner and framework during configuration.</p>

            <pre><code au-prism="nix">gulp e2e</code></pre>

            <p>You can run just a subset of tests by providing a source name as follows:</p>

            <pre><code au-prism="nix">gulp e2e --grep=app</code></pre>

            <p>You can specify that the tests are run over https or on a different port using the switches:</p>

            <pre><code au-prism="nix">gulp e2e --secure --port=5000</code></pre>

            <p>You can also run the tests on a different browser from the default chrome by using:</p>

            <pre><code au-prism="nix">gulp e2e --browser=[chrome/firefox/ie/edge]</code></pre>

            <h3>serve</h3>

            <p>This will serve the app for you to view in a browser.</p>

            <pre><code au-prism="nix">gulp serve</code></pre>

            <p>You can specify that the content is served over https or on a different port using the switches:</p>

            <pre><code au-prism="nix">gulp serve --secure --port=5000</code></pre>

            <p>This command will also watch for changes in the files being served, rebuild them and then reload the browser.</p>

            <h3>version</h3>

            <p>This will allow you to show or update the package version.</p>

            <pre><code au-prism="nix">gulp version</code></pre>

            <p>Running this task with no parameters will show the current version, alternatively use the following parameters
                to update the version:</p>

            <ul>
                <li>--part=[major, minor, patch] - the part of the version you want to modify</li>
                <li>--mode=[set, inc] - set the part to a specific value or increment the current value</li>
                <li>--value=someValue - required if you use the set mode Examples gulp version</li>
            </ul>

            <pre><code au-prism="nix">gulp version --part=patch --mode=inc</code></pre>
            <pre><code au-prism="nix">gulp version --part=minor --mode=set --value=1</code></pre>

            <h3>platform-electron-dev</h3>

            <p>This task will create development versions of the electron runtime that will wrap your www folder and allow you
                to develop in-situ.</p>

            <pre><code au-prism="nix">gulp platform-electron-dev</code></pre>

            <p>The platform development versions will be created in the ./platform/electron/{platform}-{architecture} folder,
                where the platforms and architectures are either read from your unite.json or automatically determined from
                you system.</p>

            <h3>platform-web-package</h3>

            <p>This task will gather all the necessary components of the application and create a folder in the top level packaged
                directory named {version}/web.</p>

            <pre><code au-prism="nix">gulp platform-web-package</code></pre>

            <p>This folder contains a complete set of web deployable files for the application. A zip file named packaged/{version}_web.zip
                will also be created in the packaged directory.</p>

            <p>To see which file are included in a packaged version see the
                <a href="#" au-scroll-to-element="id: platformPackagedFiles; y-offset.bind: topOffset">Platform Packaged Files</a>
                section.
            </p>

            <p>For configuring options for this task see the
                <a href="#" au-scroll-to-element="id: platformWeb; y-offset.bind: topOffset">Platform Web</a> section.</p>

            <h3>platform-electron-package</h3>

            <p>This task will gather all the necessary components of the application and create a folder in the top level packaged
                directory named {version}/electron.</p>

            <pre><code au-prism="nix">gulp platform-electron-package</code></pre>

            <p>This folder will then be used to create a set of platform/architecture electron packages in folders named {version}/electron_{platform}_{architecture}
                and a corresponding zip file in the packaged root folder.</p>

            <p>To see which file are included in a packaged version see the
                <a href="#" au-scroll-to-element="id: platformPackagedFiles; y-offset.bind: topOffset">Platform Packaged Files</a>
                section.
            </p>

            <p>For configuring options for this task see the
                <a href="#" au-scroll-to-element="id: platformElectron; y-offset.bind: topOffset">Platform Electron</a> section.</p>

            <h3>platform-docker-package</h3>

            <p>This task will package your web app into the docker image that you choose, if you don't supply any parameters
                it will default to nginx. The output of the task will be written to ./packaged/{version}_docker_{image}.tar</p>

            <pre><code au-prism="nix">gulp platform-docker-package</code></pre>

            <p>Optionally specify the docker base image and where you want the web content within that image.</p>

            <pre><code au-prism="nix">gulp platform-docker-package --image=httpd --www=/usr/local/apache2/htdocs/</code></pre>

            <p>Alternatively you can set the defaults as values in the unite.json platforms section:</p>

            <pre><code au-prism="json">"platforms": {
    "Docker": {
        "image": "httpd",
        "www": "/usr/local/apache2/htdocs/"
    }
}</code></pre>

            <p>If you want to add additional files to the docker image just place them in ./www/assetSrc/docker/{image}/ folder
                and the structure will be copied recursively to the root of the image.</p>

            <b>Examples</b>

            <p>To replace the default nginx configuration add the following file to ./www/assetSrc/docker/nginx/etc/nginx/nginx.conf</p>

            <p>To replace the default httpd configuration add the following file to ./www/assetSrc/docker/httpd/usr/local/apache2/conf/httpd.conf</p>

            <hr id="themeAssets" />

            <h2>Theme Assets</h2>

            <p>During the app generation 3 files will have been created, if you change any of them then you should run the theme-build
                task again.
            </p>

            <ul>
                <li>./www/assetsSource/theme/logo-tile.svg</li>
                <li>./www/assetsSource/theme/logo-transparent.svg</li>
                <li>./www/assetsSource/theme/unite-theme.json</li>
            </ul>

            <p>The logo-tile.svg image should have a design that works well on a tile, e.g. a white icon with transparent background
                (the background color can be specified as part of the unite-theme.json configuration).</p>

            <p>The logo-transparent.svg image should be a normal colored icon also on a transparent background, mostly used
                for the .ico image.</p>

            <p>The fields in the unite-theme.json should be self explanatory in terms of what they generate in the index.html
                page. The themeHeaders will get overwritten when you run theme-build again so any custom headers you want
                should go in the customHeaders property. The backgroundColor is used for tile backgrounds and the themeColor
                is used to color the safari pinned icon mask.</p>

            <pre><code au-prism="json">{ 
    "metaDescription": "Test CSS",
    "metaKeywords": [ "Test", "CSS" ],
    "metaAuthor": "Unite JS",
    "customHeaders": [ 
        "&lt;meta property=\"twitter:site\" content=\"@unitejs\"&gt;" 
    ], 
    "themeHeaders": [ ... Generated by theme-build task ],
    "backgroundColor": "#339933",
    "themeColor": "#339933"
}
        </code></pre>

            <h2 id="platformPackagedFiles">Platform Packaged Files</h2>

            <p>The files included within each package are calculated from the list below:</p>

            <ul>
                <li>index.html</li>
                <li>dist/**/*</li>
                <li>css/**/*</li>
                <li>assets/**/*</li>
                <li>assetsSrc/root/**/* - These files will be recursively copied to the root of the packaged version</li>
                <li>client packages code that is script included in index.html</li>
                <li>client packages assets defined in unite.json clientPackages section</li>
            </ul>

            <h2>Platforms Options</h2>

            <p>If you manually edit your unite.json, you can add additional options for the platform settings.</p>

            <h3 id="platformWeb">Web</h3>

            <p>There are currently no other options for this platform.</p>

            <h3 id="platformElectron">Electron</h3>

            <p>For more information about the options see the
                <a href="https://github.com/electron-userland/electron-packager#readme" target="_blank" rel="noopener" aria-label="Electron Documentation">Electron Documentation</a>
            </p>

            <p>You can choose to use a specific version of the Electron runtime, if not specified it defaults to the most recent
                stable version see
                <a href="https://github.com/electron/electron/releases" target="_blank" rel="noopener" aria-label="Electron Releases">Electron Releases</a>.

                <p>You can specify one or more of the platform architecture combinations, if you don't specify any platforms
                    the packager will try and identify your current platform/architecture and create a package accordingly.</p>

                <p>Any others keys in the Electron settings will be converted into -- params and passed to the packager, this
                    allows for other options like those specific to the darwin/mas or win32 targets
                    <a href="https://github.com/electron-userland/electron-packager/blob/master/usage.txt" target="_blank" rel="noopener" aria-label="Electron Usage">Electron Usage</a> to be used.


                    <pre><code au-prism="json">"platforms": {
    "Electron": {
        "runtimeVersion": "1.7.9",
        "platformArch" : [
            "win32/ia32",
            "win32/x64",
            "darwin/x64",
            "mas/x64",
            "linux/ia32",
            "linux/x64",
            "linux/armv7l"
        ]
        ...
    }
}                
</code></pre>

                    <hr>

                    <h2>Modifications To Generated Files</h2>

                    <p>If you modify any of the files generated by UniteJS then you should remove the
                        <b>Generated by UniteJS</b>
                        comment at the bottom of the file. If you then call any of the UniteJS operations again your changes will be retained. Any
                        files which are generated but can not contain comments because of their format (e.g. .json files)
                        will where possible be combined with any changes you have made.</p>

                    <hr>
                    <h2>Icon Modifications</h2>

                    <p>Of course you don't need to run the theme-build task you could instead generate your own icons and headers
                        using a site such as
                        <a href="https://realfavicongenerator.net/" target="_blank" rel="noopener" aria-label="RealFaviconGenerator">RealFaviconGenerator</a>
                        and copy the headers in to the customHeaders property and the icons wherever you like in your site. All credit goes to RealFaviconGenerator
                        for the inspiration of the minimal set of resources need to satisfy modern browsers.</p>


        </div>
</template>